import{b as w,c as V,d as q,e as B,f as G,g as T,h as P,i as O,j as R,k as j}from"./chunk-IZ2RRJJK.js";import"./chunk-4TDNJBFX.js";import{a as N}from"./chunk-MIB3B5C2.js";import{b as E,d as p,f as b,g as M,j as S,k as _,l as k,p as F,q as I}from"./chunk-RGHW7JZX.js";import{d as D}from"./chunk-OEPH3VZB.js";import{Ab as y,Bb as d,Ga as o,Sa as x,Xb as C,Y as m,cb as r,ea as c,fa as f,jb as n,kb as a,lb as l,mb as h,pb as v,ra as g}from"./chunk-PEAAODBY.js";import"./chunk-4CLCTAJ7.js";var A=class u{expense_id=g("");#e=m(N);#t=m(D);form=m(F).nonNullable.group({title:["",p.required],category:["",p.required],date:["",p.required],amount:["0",[p.required]]});constructor(){C(()=>{this.expense_id()&&this.getExpenseById(this.expense_id())})}getExpenseById(e){this.#e.getExpenseById(e).subscribe(t=>{t.success&&this.populateForm(t.data)})}populateForm(e){this.form.setValue({title:e.title,category:e.category,date:this.formatDate(e.date.toString()),amount:e.amount.toString()})}formatDate(e){return new Date(e).toISOString().split("T")[0]}save(){let e={title:this.form.controls.title.value,category:this.form.controls.category.value,date:new Date(this.form.controls.date.value),amount:Number(this.form.controls.amount.value),expense_id:this.expense_id()};this.#e.updateExpense(this.expense_id(),e).subscribe(t=>{t.success&&(alert("Expense updated successfully"),this.#t.navigate(["/expenses"]))})}static \u0275fac=function(t){return new(t||u)};static \u0275cmp=x({type:u,selectors:[["app-expenseedit"]],inputs:{expense_id:[1,"expense_id"]},decls:15,vars:8,consts:[["picker",""],[1,"expense-form",3,"ngSubmit","formGroup"],["placeholder","title",3,"formControl"],["placeholder","category",3,"formControl"],["matInput","","placeholder","Choose a date",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["placeholder","amount",3,"formControl"],[3,"disabled"]],template:function(t,i){if(t&1){let s=h();n(0,"h1"),d(1,"Edit Expense"),a(),n(2,"form",1),v("ngSubmit",function(){return c(s),f(i.save())}),l(3,"input",2)(4,"input",3),n(5,"mat-form-field")(6,"mat-label"),d(7,"Date"),a(),l(8,"input",4)(9,"mat-datepicker-toggle",5)(10,"mat-datepicker",null,0),a(),l(12,"input",6),n(13,"button",7),d(14,"Update"),a()()}if(t&2){let s=y(11);o(2),r("formGroup",i.form),o(),r("formControl",i.form.controls.title),o(),r("formControl",i.form.controls.category),o(4),r("matDatepicker",s)("formControl",i.form.controls.date),o(),r("for",s),o(3),r("formControl",i.form.controls.amount),o(),r("disabled",i.form.invalid)}},dependencies:[I,S,E,b,M,_,k,j,P,O,R,w,T,G,B,V,q],styles:[".expense-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;max-width:500px;margin:auto;padding:20px;box-shadow:0 2px 4px #0000001a;border-radius:8px;background:#fff}"]})};export{A as ExpenseeditComponent};
