import{a as L}from"./chunk-MIB3B5C2.js";import{f as Y,i as T,k as N,m as $,n as I,o as V,q as j}from"./chunk-RGHW7JZX.js";import{d as z,e as F}from"./chunk-OEPH3VZB.js";import{Bb as r,Cb as g,Db as _,Eb as v,Ga as o,Kb as y,Lb as b,Mb as k,Na as x,Nb as S,Sa as E,Y as m,cb as d,ea as C,fa as P,hb as f,hc as D,ib as h,ic as w,jb as s,kb as a,mb as M,pb as u,rb as O}from"./chunk-PEAAODBY.js";import"./chunk-4CLCTAJ7.js";var B=(i,e)=>e.value,X=(i,e)=>e.expense_id,q=i=>["/expenses",i];function G(i,e){if(i&1&&(s(0,"option",1),r(1),a()),i&2){let t=e.$implicit;d("value",t.value),o(),_(" ",t.display," ")}}function H(i,e){if(i&1){let t=M();s(0,"li",2)(1,"a",6)(2,"span",7),r(3),b(4,"date"),a(),s(5,"span",8),r(6),a(),s(7,"span",9),r(8),a(),s(9,"span",10),r(10),b(11,"currency"),a()(),s(12,"button",11),u("click",function(){let l=C(t).$implicit,p=O();return P(p.deleteExpense(l.expense_id))}),r(13,"X"),a()()}if(i&2){let t=e.$implicit;o(),d("routerLink",y(10,q,t.expense_id)),o(2),g(S(4,5,t.date,"MM/dd/yyyy")),o(3),g(t.title),o(2),g(t.category),o(2),g(k(11,8,t.amount))}}function J(i,e){i&1&&(s(0,"p",3),r(1,"No expense found."),a())}var R=class i{#t=m(z);#e=m(L);expenses=x([]);currentPage=1;pageSize=20;totalExpenses=0;totalPages=0;dateOptions=x([]);selectedYear=x(void 0);selectedMonth=x(void 0);dateControl=new T("");constructor(){let e=new Date,t=`${e.getFullYear()}-${("0"+(e.getMonth()+1)).slice(-2)}`;this.dateControl.setValue(t),this.selectedYear.set(e.getFullYear()),this.selectedMonth.set(e.getMonth()+1),this.dateOptions.set(this.generateDateOptions()),this.loadExpenses(e.getFullYear(),e.getMonth()+1)}generateDateOptions(){let e=[],t=new Date,n=t.getFullYear()-3,l=t.getFullYear()+1;for(let p=l;p>=n;p--)for(let c=11;c>=0;c--){let A=new Date(p,c);e.push({display:A.toLocaleString("default",{year:"numeric",month:"long"}),value:`${p}-${("0"+(c+1)).slice(-2)}`})}return e}onDateChange(){let e=this.dateControl.value;if(e){let[t,n]=e.split("-").map(Number);this.selectedYear.set(t),this.selectedMonth.set(n),this.currentPage=1,this.loadExpenses(t,n)}else console.warn("Selected date is null or undefined")}loadExpenses(e,t){let n=e??new Date().getFullYear(),l=t??new Date().getMonth()+1;this.#e.getExpensesCount(n,l).subscribe(p=>{p.success&&(this.totalExpenses=p.data,this.totalPages=Math.ceil(this.totalExpenses/this.pageSize),this.totalExpenses>0?this.#e.getExpenses(this.pageSize,this.currentPage,n,l).subscribe(c=>{c.success&&(this.expenses.set(c.data),this.totalPages=Math.ceil(this.totalExpenses/this.pageSize))}):this.expenses.set([]))})}previousPage(){this.currentPage>1&&(this.currentPage--,this.loadExpenses(this.selectedYear(),this.selectedMonth()))}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.loadExpenses(this.selectedYear(),this.selectedMonth()))}deleteExpense(e){this.#e.deleteExpense(e).subscribe(t=>{t.success&&(this.totalExpenses--,this.totalPages=Math.ceil(this.totalExpenses/this.pageSize),this.expenses.set(this.expenses().filter(n=>n.expense_id!==e)),this.loadExpenses(this.selectedYear(),this.selectedMonth()))})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-expenselist"]],decls:15,vars:7,consts:[[1,"date-dropdown",3,"change","formControl"],[3,"value"],[1,"expense-item"],[1,"no-expense"],[1,"pagination"],[3,"click","disabled"],[1,"expense-link",3,"routerLink"],[1,"expense-date"],[1,"expense-title"],[1,"expense-category"],[1,"expense-amount"],["alt","Delete",1,"delete-button",3,"click"]],template:function(t,n){t&1&&(s(0,"select",0),u("change",function(){return n.onDateChange()}),f(1,G,2,2,"option",1,B),a(),f(3,H,14,12,"li",2,X,!1,J,2,0,"p",3),s(6,"div",4)(7,"button",5),u("click",function(){return n.previousPage()}),r(8,"Previous"),a(),s(9,"span"),r(10),a(),s(11,"button",5),u("click",function(){return n.nextPage()}),r(12,"Next"),a(),s(13,"span"),r(14),a()()),t&2&&(d("formControl",n.dateControl),o(),h(n.dateOptions()),o(2),h(n.expenses()),o(4),d("disabled",n.currentPage===1),o(3),v("Page ",n.currentPage," of ",n.totalPages,""),o(),d("disabled",n.currentPage===n.totalPages),o(3),_("Number of Expenses ",n.totalExpenses,""))},dependencies:[D,F,w,j,I,V,$,Y,N],styles:[".delete-button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;border-radius:5px;padding:5px 10px;font-size:14px;cursor:pointer;transition:background-color .3s ease;margin-left:10px}.delete-button[_ngcontent-%COMP%]:hover{background-color:#c0392b}.expense-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-bottom:1px solid #e0e0e0;margin:10px 0;border-radius:8px;background-color:#f8f8f8;box-shadow:0 2px 6px #00000026;transition:background-color .3s ease}.expense-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.expense-link[_ngcontent-%COMP%]{display:flex;flex-grow:1;justify-content:space-between;align-items:center;text-decoration:none;color:#333}.expense-date[_ngcontent-%COMP%], .expense-title[_ngcontent-%COMP%], .expense-category[_ngcontent-%COMP%], .expense-amount[_ngcontent-%COMP%]{margin:0 10px}.expense-date[_ngcontent-%COMP%]{flex-basis:15%;font-size:.9em;color:#555}.expense-title[_ngcontent-%COMP%]{flex-basis:35%;font-weight:700;font-size:1em;color:#222}.expense-category[_ngcontent-%COMP%]{flex-basis:20%;font-size:.9em;color:#888}.expense-amount[_ngcontent-%COMP%]{flex-basis:20%;font-size:.9em;text-align:right;color:#27ae60}.no-expense[_ngcontent-%COMP%]{text-align:center;font-size:1.2em;color:#999;padding:20px}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:20px;font-size:1em}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#3498db;color:#fff;border:none;border-radius:5px;padding:7px 14px;font-size:14px;cursor:pointer;transition:background-color .3s ease;margin:0 10px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#2980b9}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1em;margin:0 10px}.date-dropdown[_ngcontent-%COMP%]{appearance:none;background-color:#f9f9f9;border:1px solid #ccc;border-radius:4px;padding:8px 12px;font-size:14px;font-family:Arial,sans-serif;color:#333;cursor:pointer}.date-dropdown[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#fff;color:#333}"]})};export{R as ExpenselistComponent};
